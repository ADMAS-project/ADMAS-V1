
# ðŸ”’ ADMAS ROS 2 Security Policies

This directory contains all SROS2 security policy definitions used to enforce **strict node-level access control** in the ADMAS system.

Each `.xml` file defines **fine-grained permissions** for a ROS 2 node, including allowed topics for publishing and subscribing. These are signed and deployed into SROS2 enclaves to enforce DDS security at runtime.

---

## Included Policies

| Node                       | Enclave Name                | Permissions                                                    |
|----------------------------|-----------------------------|----------------------------------------------------------------|
| `face_monitoring_publisher`| `/face_monitoring_publisher`| Publish `/face_monitor`                                        |
| `dashboard`                | `/dashboard`                | Subscribe `/face_monitor`, `/lane_warning`, `/road_sign_topic` |
| `communication`            | `/communication`            | Subscribe `/face_monitor`                                      |
| `emergency_parking`        | `/emergency_parking`        | Subscribe `/face_monitor`                                      |
| `lane_departure_warning`   | `/lane_departure_warning`   | Publish `/lane_warning`                                        |
| `traffic_sign_detection`   | `/traffic_sign_detection`   | Publish `/road_sign_topic`                                     |
| `security_policy.xsd`      | â€”                           | XML Schema for validating all policies                         |

---

## Usage: Generate Permission Files

From inside this folder:

```bash
ros2 security create_permission ../sros2_keystore /face_monitoring_publisher face_monitoring_publisher.xml
ros2 security create_permission ../sros2_keystore /dashboard dashboard.xml
ros2 security create_permission ../sros2_keystore /communication communication.xml
ros2 security create_permission ../sros2_keystore /emergency_parking emergency_parking.xml
ros2 security create_permission ../sros2_keystore /lane_departure_warning lane_departure_warning.xml
ros2 security create_permission ../sros2_keystore /traffic_sign_detection traffic_sign_detection.xml
````

> Requires `security_policy.xsd` in this directory for schema validation.

---

## Final Structure (`sros2_keystore/`)

```bash
sros2_keystore/
â”œâ”€â”€ enclaves/
â”‚   â”œâ”€â”€ communication/
â”‚   â”‚   â”œâ”€â”€ cert.pem
â”‚   â”‚   â”œâ”€â”€ governance.p7s -> ../governance.p7s
â”‚   â”‚   â”œâ”€â”€ identity_ca.cert.pem -> ../../public/identity_ca.cert.pem
â”‚   â”‚   â”œâ”€â”€ key.pem
â”‚   â”‚   â”œâ”€â”€ permissions_ca.cert.pem -> ../../public/permissions_ca.cert.pem
â”‚   â”‚   â”œâ”€â”€ permissions.p7s
â”‚   â”‚   â””â”€â”€ permissions.xml
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ emergency_parking/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ face_monitoring_publisher/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ lane_departure_warning/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ traffic_sign_detection/
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ policies/
â”‚   â”œâ”€â”€ communication.xml
â”‚   â”œâ”€â”€ dashboard.xml
â”‚   â”œâ”€â”€ emergency_parking.xml
â”‚   â”œâ”€â”€ face_monitoring_publisher.xml
â”‚   â”œâ”€â”€ lane_departure_warning.xml
â”‚   â”œâ”€â”€ traffic_sign_detection.xml
â”‚   â””â”€â”€ security_policy.xsd
â”‚
â”œâ”€â”€ private/
â”‚   â”œâ”€â”€ ca.key.pem
â”‚   â”œâ”€â”€ identity_ca.key.pem -> ca.key.pem
â”‚   â””â”€â”€ permissions_ca.key.pem -> ca.key.pem
â”‚
â””â”€â”€ public/
    â”œâ”€â”€ ca.cert.pem
    â”œâ”€â”€ identity_ca.cert.pem -> ca.cert.pem
    â””â”€â”€ permissions_ca.cert.pem -> ca.cert.pem
```

### what is that ? 

* Each **enclave** folder under `enclaves/` holds cryptographic keys and permission files for one ROS 2 node.
* `policies/` contains the editable `.xml` policy definitions and the XSD schema.
* `private/` and `public/` store root certificate authority (CA) materials.
* The `permissions.p7s` and `governance.p7s` files are auto-generated by SROS2 tools.

---
---

##  Security Architecture

* **SROS2 Enclaves**: Each node runs in a dedicated enclave with signed certs and permissions.
* **Topic-Level Isolation**: No node can access a topic unless explicitly authorized.
* **Schema-Driven Policies**: Validated against `security_policy.xsd` to enforce consistency and correctness.
* **No Trust Assumed**: Only nodes with valid identity & permissions may participate in DDS.

---

## Tips

* Use `--ros-args --enclave /node_name` or set `ROS_SECURITY_ENCLAVE` to load policies correctly.


---

##  Maintained by

**@0xAhmadAlaa**
